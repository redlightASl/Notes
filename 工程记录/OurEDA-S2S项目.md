# OurEDA-S2S

这是实验室目前首个搭载了完善定向定深功能的机器人，采用了两个独立的PID环进行控制。整个机器人使用RT-Thread作为基础操作系统，搭载Lib-ROV的2.5版本（3.0版本删去了一部分功能），经过优化能够达到很高的实时性，提供断线重连功能，但是为了省成本（功能性阉割），只能上位机向下位机发数据，下位机不能回传数据。

在项目过程中也遇到了一些问题，下面来进行叙述

## 硬件

硬件方面采用了模拟视频方案，基于模拟FPV摄像头和视频叠加板传输视频到上位机。控制信号则使用全隔离的RS485协议进行传输。

初版PCB遇到了一个典中典问题：封装画错。有一说一，很多时候自己画封装虽然可以保障正确性，但却是太耗时了，就导致不得不信任snapeda、立创这些网站提供的封装。对于这个问题个人的一个解决思路就是“审核”：企业中通常安排专人负责管理封装库，但对于高校来说就不太可能了。不过可以让多个工程师进行对新加入或新绘制的封装进行“双盲审核”，有经验的工程师总是会相信自己，只有互相监督才可以并避免犯错

第二版PCB在初版的基础上加入更合理的电池电压采集方案，同时优化了布线，避免了不少问题。

### 下位机

下位机的硬件绘制了两版，但实际上都没什么难度，就是嗯连线，唯一要考虑的就只有AVout和RS485之间的干扰——不过最后摄像头太辣鸡还是导致视频有雪花点

这两版都没有做接地隔离等，这在后面的新机器人中会得到改进

### 上位机

上位机的PCB打了三个版本。第一个版本因为板子尺寸和接口位置被废弃了；第二版的数字输入接口没有安排好，导致按钮按下后指示灯不亮——这一版的电路是经过multisim仿真的，但仍然不能工作，因此在之后的工作中需要注意仿真和实际之间的差别。最后第三版修复了这些问题，并且相关电路沿用到后续控制箱电路内

## 软件

软件方面遇到的问题主要出在两方面：架构和算法

### RT-Thread





### PID算法







### PID参数动态更新









