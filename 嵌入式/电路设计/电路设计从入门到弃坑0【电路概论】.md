# 电路设计从入门到弃坑0【电路概论】

> 学习模拟似乎是一项艰巨的任务。模拟工程师通常无法自始至终都直线前进：他们沿着荆棘丛生的道路曲折前行。他们零星地获取一些见解——从这儿获取一点，从那儿获取一点。慢慢地，零星的知识形成一个完整的体系，模糊的概念变得清晰起来。
>
> 我们永远都无法享受到跨过最后一道障碍或将最后一块拼图拼好的满足感：这是不可能实现的。
>
> ——Bruce Trump 来自 TI

**上面这段话送给所有要学习或正在学习电路，尤其是模拟电路的同学们**

在本系列博客中，将涉及以下缩写/简写的知识方向，你的学校可能会对课程的名称有所改动，但课程内容是大致相同的。

* 电路原理：电子线路、电子线路分析基础等基础电路课
* 模电：模拟电子电路、模拟电路、模拟电子技术、模拟电子线路等模拟电路课
* 数电：数字电子电路、数字电路、数字电子技术、数字电子线路等数字电路课
* 通信原理：通信原理、通信电子线路、通信电子电路、高频电子电路、高频电子线路等高频电路及通信理论课
* 强电：功率电子电路、功率电子线路、电力电子电路、电力电路等电力电子系统及理论课
* 模集：模拟集成电路设计、模拟IC设计等关于片上模拟集成电路理论的通识课
* 数集：数字集成电路、数字集成电路设计等关于片上大规模数字集成电路设计方法和基础理论的通识课

**电路原理阐述了电路运行的基本规律**：使用抽象电路模型（来自电磁学和图论）、高等数学、线性代数、拉普拉斯变换等基础学科知识描述电路，提供一般的集总参数电路分析方法

**模电介绍了如何用电路操纵电路**：从半导体器件的物理性质（来自半导体器件物理基础）介绍如何使用这些器件构建能够对电信号或功率电压电流进行处理的电路，其中最核心的部分就是放大器和反馈

**数电是逻辑的艺术**：针对逻辑电路进行分析，结合布尔代数引入了晶体管在导通、截止两状态下的应用，并提炼出使用硬件描述语言对数字电路进行设计、分析、仿真的基本方法，应用重点是抽象和用电路构建状态机

**通信原理是模电信号上升到高频率以后的精确近似**：使用来自信号与系统、电磁场与电磁波的基础分析方法，从分布参数电路与谐振、傅里叶分析角度解释模拟电路工作在高频情况下的状态与应用，并如何对通信信号进行调制-解调以实现远距离通信

**强电旨在提供模电功率到达一个极限后的分析方法**：与上面的内容有着巨大的差别，但基础理论仍是基于电路原理的（结合电机学、电工学相关知识）。通过阐明功率半导体器件的工作原理和应用，集中讨论电路在巨大功率下如何保障效率和质量

### 专有名词解释

本教程不会介绍电路原理、信号与系统的相关内容，因此附上专有名词更贴近直观的解释，和专业参考书籍存在一定差异，请以专业参考书为准

* 电路拓扑（来自电路原理）：就是电路图的“形式”——把具体元件抽离出电路图，把实际电路图变换成理想电路模型，抽象出节点、支路后剩下的一个图就称为电路拓扑。可以形象理解成电路的套路或者说格式
* 系统（来自信号与系统）：电路实现其功能过程的抽象。可以形象理解成电路功能框图
* 信号（来自信号与系统）：从系统角度看，每个支路量都承载了信息，因此支路量可以称为信号
* 激励-响应（来自信号与系统）：从系统的角度看电路时，系统中某个功能框的输入称为激励，系统某个功能框的输出称为响应
* 反馈（来自信号与系统）：把某个响应引入到激励部分或功能框内部的过程称为反馈，对应的信号称为反馈信号

## 模电

模电的知识结构是自下而上的

### 半导体物理与半导体器件

讲述掺杂与导电性、PN结、双结型晶体管、场效应管等的基本物理原理和制造工艺对器件性能的影响

这一部分内容更偏重理论，和电路原理一样属于帮助理解模电、数电等工程应用的理论基础

### 常见的半导体器件

**二极管**、**三极管**、**场效应管**等基本的半导体器件，连同它们的变种器件，共同组成了模拟电子电路，经由开关频率特殊优化的开关管器件则构成了数字电路的基础——逻辑门和触发器

#### 二极管

由一个PN结封装成器件，就得到了具有**单向导电性**的二极管

生产中用到的不仅有二极管的单向导电性，还有**击穿电压**、**漏电流**等等一系列特性

#### 三极管和场效应管

两个PN结封装成一个器件，就得到了三极管（BJT）；而利用金属-氧化物绝缘层-半导体形式封装产生的电场效应，可以生产出场效应管（MOSFET）。

三极管一般是电流控制电流型器件；而场效应管一般是电压控制电压型器件，二者可以互补——于是出现了结合二者，能够实现高功率输出的**晶闸管**（可控硅）和**IGBT**（绝缘栅双极型晶体管），以及复合单一器件的**达林顿管**

早期设备中使用真空管（电子管），正是因为半导体技术的发展才让三极管取代了真空管，但是二者的功能是一致的：**对电信号加以控制**

### 晶体管信号放大电路

这里的晶体管（Transistor）是BJT（双结型晶体管，也就是三极管）和FET（场效应管）的统称

晶体管通过某些组合，可以最大限度发挥其控制信号的作用，而这种电路一般用于放大某些小信号，所以被称为晶体管**信号放大电路**。

放大电路并不是指输入1V，凭空就能输出3V，而是指*输入信号1V，通过外加2V的供电，能输出为2V的信号*

信号放大电路往往看重信号的保真程度和信号的放大倍数，然而晶体管往往很容易受到门限电压、温度升高、电源变化等影响造成信号失真，为了避免这些问题，人们就对普通放大电路进行改进；同时为了获取更高的放大倍数，常常采用前级**差分放大电路**-输入级**共射放大电路**-驱动级**功率放大电路**-输出级**射极跟随器**这样的多级放大模式，从而提高信号放大倍数

主要参考的性能参数就是电压增益和电流增益：$A_v=\frac{v_o}{v_i}$ $A_i=\frac{i_o}{i_i}$

### 晶体管功率放大电路

对于一些特殊的应用（比如音响），信号放大电路无法驱动后级输出设备（扬声器），就出现了晶体管功率放大电路

这类电路一般使用特殊设计的能经受大电流、高电压的晶体管作为放大器件，于是可以在电源部分加大功率，并引入**A类**、**B类**、**AB类**、**D类**四大类拓扑结构

通常需要注意功率放大电路的效率：$\eta=\frac{P_L}{P_S}$

### 晶体管振荡电路

为了控制或产生周期性的激励，人们还设计出了能够产生振荡信号的晶体管电路。这种周期性的振荡几乎就是数字电路系统的心脏，整个数字电路的时钟都要依赖于它

这种电路建立在放大电路和闭环控制理论的基础上，利用**深度正反馈**进行工作

一般分立式元件难以产生高精度的信号输出，现在一般使用晶振、单片机（微控制器）或专用的集成电路生成振荡信号。**晶振**的压电效应让它能够始终以稳定的频率产生振荡；单片机集成的**分频器**能够把振荡频率较高的信号变成振荡频率较低的；专用的**PLL**电路则利用鉴相器、滤波器、压控振荡器的组合自由调节输出信号的振荡频率


### 集成运算放大器

随着集成电路技术的发展，可以将大量晶体管集成在硅片上，内部大多为模拟电路的芯片被称为**模拟集成电路**，内部结构中多数字电路的芯片则是**数字集成电路**，随着CMOS技术的发展，二者经常同时集成在单个硅片上从而实现复杂功能。

通过将晶体管信号放大电路集成在一个芯片上，可以实现良好的放大性能，这种模拟集成电路就是集成运算放大器。运放具有**虚短**、**虚断**、**高输入阻抗**、**低输出阻抗**等特征，利用这些特征可以组合出模拟运算电路和其他特殊的放大电路

### 集成功率放大器

集成功率放大器即**集成功放**，是分立式晶体管功率放大器在功率半导体器件发展的基础上形成的一种新型集成电路

现代模拟电路具有集成化、小型化的趋势，集成功率电路正是舍弃了一部分高功率特性换来了更高的转换效率和更小的体积，集成的功率放大器由于寄生参数少、性能高，在射频领域有着广泛应用。不过为了获得更优秀的功率表现，由大量功率半导体器件和一部分控制器芯片组成的功率电路还是有不小的市场份额

### 电源管理芯片和功率电源电路

模拟电路的另一部分就是基于变压器、二极管、晶体管、基本无源器件等构建的**稳压**或**恒流电源**

从基础的**线性电源**开始，到**Buck**、**Boost**、**Flyback**等常见拓扑，再到先进的**LLC**......所有电源电路都还是模电基本理论和基本开关器件的应用

在此基础上伴随半导体技术的发展，氮化镓、碳化硅等新型功率半导体器件（宽禁带半导体）为实现小型化、高速开关、大功率、高效率的电源电路提供了可能

## 数电

数电的知识结构是从抽象到具体的

### 布尔代数

布尔代数就是逻辑代数，使用布尔代数可以化简很多代数运算，并让这些逻辑在电路上可实现

数电的基础是数学，数电中所有元件都是为了解决数学计算问题而设计

所以布尔代数是数字电路的基础

### 开关管与逻辑门

电路可以使用高电平或低电平表示布尔代数中的0和1，进而实现数学计算

为了对数字信号进行处理，前人设计出了三种基本的逻辑门——与门、或门、非门

使用MOSFET（金属氧化物半导体场效应管）可以实现这三种逻辑门，进而实现更多复杂功能

在现代集成电路技术中，多采用CMOS工艺，将两个MOSFET制造在一起，并通过两个成对的MOSFET实现基础的逻辑门

只使用逻辑门构成的数字电路称为**组合逻辑电路**

组合逻辑电路只能“瞬时”（由于寄生电容的存在，实际的组合逻辑电路存在延迟）地反映当前输入对应的输出，换句话说，它可以描述函数关系，但不能描述状态关系

### 触发器与锁存器

使用CMOS器件还可以制造具有“记忆”功能的器件——锁存器（Latch）

锁存器可以暂时地保存输入的电平，并且需要外加一定时间的高电平或低电平才能让暂存功能启动。不过再次加入一对MOSFET便可以让锁存器“滴答”（Tik-Tok）起来，这就是所谓的触发器。

触发器（Flip-Flop，FF）是一种外加上升沿/下降沿时保存输入电平的器件

使用触发器就可以实现随状态变化的数字电路，我们一般将其称为**状态机**

### 状态机

状态机是数字电路的最终表现形式，目前大部分可以应用的数字电路都能够被抽象为一个无比复杂的状态机，包括但不限于CPU、高速总线控制器。

使用表述“如果状态A时，当且仅当触发信号K到来，则状态跳转到B；如果状态B时，当且仅当触发信号J到来，则状态跳转到A；状态A时输出1，状态B时输出0”即可建立一个2状态的状态机，随着触发信号J和K的到来，电路会在状态A和B之间跳来跳去，并根据情况输出0或1。

我们把上面的描述用一个图表示，也可以用表来描述，这就是状态转移图。根据状态转移图，我们可以基于基本数字电路元件搭建出状态机的电路。

显而易见，只要把这个概念扩展开，我们能够实现任何由“if else”和“goto”逻辑所描述的功能（实际上这就是图灵完备）。非常幸运，这刚好能够实现跳转、判断功能——现在你可以制造CPU了！

## 数模混合电路

> 一个笨人能理解的东西，其他人也能理解。
> ——Richard Phillips Feynman

在生活中的任何一个角落，都有数模混合电路的存在——模拟电路负责供能、处理信号；数字电路负责对电信号进行计算、控制。

本系列博客将结合个人所学，以模电-数电-数模混合电路的逻辑讲述电路设计中的一些基础知识与技巧，同步进行开关电源、MCU板级外设电路等成体系电路的设计方法说明

正如费曼所说，笔者这个“笨人”尝试将自己对于电路基础的理解用相对*实际*而*实践*的“教材式博文”写出，希望能让更多读者了解到电路设计的基础知识，喜欢上硬件（大嘘）

**基本内容**为0~30篇，中间会插入`.5`标号用来补充内容

第0篇为概论

第1~15篇为模拟电路设计基础

第16~29篇为数字电路设计基础

第30篇为综述

全文主要涵盖基础的**模电**、**数电**知识，但目前集成电路已经成为电子系统的基础，因此本文也会涉及到**模集**和**数集**的部分概念，以为读者提供从片上硬件到板级硬件的全方位理解。同时在基础理论和应用拓展上，本文也会涉及到粗浅的**半导体器件物理**、**通信原理**、**高频电子线路**知识。

**长期维护更新**。

作者水平有限，如有错误疏漏，敬请谅解。

另外，***欢迎各位有兴趣参与本系列博文编写的读者与笔者联系，共同改进这套博文！***

## 参考资料

《新概念模拟电路》杨建国

《模拟电子技术基础》童诗白 华成英

《电子管基础》佚名

《晶体管电路设计》铃木雅臣

《数字电子技术基础》阎石
